<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js" integrity="sha512-uMtXmF28A2Ab/JJO2t/vYhlaa/3ahUOgj1Zf27M5rOo8/+fcTUVH0/E0ll68njmjrLqOBjXM3V9NiPFL5ywWPQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <link rel="stylesheet" href="register.css" />
    <title>Registration page</title>
  </head>
  
  <body>
    <header class="header">
      <a href="index.html">
        <img class="logo" src="logo.svg" alt="FitGenius logo">
      </a>
      <nav class="main-nav">
        <ul class="main-nav-list">
          <li><a class="main-nav-link" href="exercises.html">Exercises</a></li>
          <li><a class="main-nav-link" href="systems.html">Training systems</a></li>
          <li><a class="main-nav-link" href="index.html">Home</a></li>
          <li><a class="main-nav-link"  href="login.html">Login</a></li>
        </ul>
    </nav>
  </header>

    <section class="container">
      <h1 class="heading">Registration Form</h1>

      <div class="form">
        <div class="input-box">
          <label>First Name</label>
          <input id="ime" type="text" name="firstName" placeholder="Enter first name" required />
        </div>

        <div class="input-box">
          <label>Last Name</label>
          <input id="prezime" type="text" name="lastName" placeholder="Enter last name" required />
        </div>

        <div class="input-box">
          <label>Email</label>
          <input id="email" type="email" placeholder="Enter email" required />
        </div>

        <div class="input-box">
          <label>Password</label>
          <input id="password" type="password" name="password" placeholder="Enter password" required />
        </div>

        <div class="input-box">
          <label>Training Level:</label>
          <select id="traininglevel">
            <option value="beginner">Beginner</option>
            <option value="intermidiate">Intermidiate</option>
            <option value="advanced">Advanced</option>
          </select>
        </div>

        <div class="input-box">
          <label>Birth Date</label>
          <input id="datumInput" type="date" name="birthYear" placeholder="Enter birth year" required />
        </div>

        <div class="input-box">
          <label>Weight</label>
          <input id="tezina" type="number" name="weight" placeholder="Enter weight in kilograms" required />
        </div>

        <div class="input-box">
          <label>Height</label>
          <input id="visina" type="number" name="height" placeholder="Enter height in centimeters" required />
        </div>

          <div class="gender-box">
            <h3>Gender</h3>
            <div class="gender-option">
              <div class="gender">
                <input type="radio" id="check-male" name="gender" value="male" checked />
                <label for="check-male">Male</label>
              </div>
              <div class="gender">
                <input type="radio" id="check-female" name="gender" value="female" />
                <label for="check-female">Female</label>
              </div>
            </div>
          </div>

          <button id="submit-btn" type="submit" onclick="doRegister()">Submit</button>
        </div>
      </section>

      <footer class="footer">
        <div class="container-footer grid grid-footer">
          <div class="logo-col">
            <a href="#">
            <img class="footer-logo" src="footerLogo.svg" alt="Fit Genius logo"></a>
    
            <ul class="social-links">
              <li><a class="footer-link" href="#" class="social-logo"><ion-icon class="social-icon" name="logo-instagram"></ion-icon></a></li>
              <li><a class="footer-link" href="#" class="social-logo"><ion-icon class="social-icon" name="logo-facebook"></ion-icon></a></li>
              <li><a class="footer-link" href="#" class="social-logo"><ion-icon class="social-icon" name="logo-twitter"></ion-icon></a></li>
            </ul>
    
            <p class="copyright">Copyright &copy; 2023 by Fit Genius</p>
          </div>
          <div class="address-col">
            <p class="footer-heading">Contact us</p>
            <address class="contacts">
              <p class="address">123 Main Street, 3rd floor, Boston,<br> MA 94125</p>
              <p>
                <a class="footer-link" href="tel:800-556-5925">800-556-5925 <br></a>
                <a class="footer-link" href="mailto:office@fitgenius.com">office@fitgenius.com</a>
              </p>
            </address>
          </div>
    
          <nav class="nav-col">
            <p class="footer-heading">Account</p>
            <ul class="footer-nav">
              <li><a class="footer-link" href="login.html">Login form</a></li>
              <li><a class="footer-link" href="#">Profile</a></li>
            </ul>
          </nav>
    
          <nav class="nav-col">
            <p class="footer-heading">Helpful links</p>
            <ul class="footer-nav">
              <li><a class="footer-link" href="#">About us</a></li>
              <li><a class="footer-link" href="#">Terms and conditions</a></li>
              <li><a class="footer-link" href="#">FAQs</a></li>
            </ul>
          </nav>
        </div>
      </footer>    
  </body>


  <script>
    function doRegister(){

        let ime = document.getElementById("ime").value.trim();
        let prezime = document.getElementById("prezime").value.trim();
        let email = document.getElementById("email").value;
        let password = document.getElementById("password").value;
        let selectedValue = document.getElementById("traininglevel");
        let datumInput = document.getElementById("datumInput")
        let visina = document.getElementById("visina").value;
        let tezina = document.getElementById("tezina").value;
        let pol = document.querySelector('input[name="gender"]:checked').value;
        
          let traininglevel = selectedValue.value;
          if(traininglevel=== "beginner"){
            traininglevel= 1;
          }
          if(traininglevel=== "intermidiate"){
            traininglevel= 2;
          }
          if(traininglevel=== "advanced"){
            traininglevel= 3;
          }


          let izabraniDatum = new Date(datumInput.value);
          let godiste = izabraniDatum.getFullYear();

          axios.post("http://localhost:3600/register", {
             usr_ime: ime,
             usr_prezime: prezime,
             usr_email: email,
             usr_password: password,
             usr_traininglevel: traininglevel,
             usr_godiste: godiste,
             usr_tezina: tezina,
             usr_visina: visina,
             usr_pol: pol,
             usr_wsLevel: 1
          }).then((res) => {
            window.location.href = "login.html";
              if(res.data.result === "ERR"){
                  document.getElementById("login-msg").innerHTML = res.data.Message;
                  return;
                }

              console.log("Registracija uspesna!")
          }).catch((error)=>{
                console.log(error);
            });
        }
 
  </script>
</html>

